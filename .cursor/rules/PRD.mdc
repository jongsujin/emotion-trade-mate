---
alwaysApply: true
---

# 📘 EmotionTrade PRD (Product Requirements Document)

## 🧩 서비스 요약

EmotionTrade는 사용자의 투자 내역과 감정 상태를 함께 기록하고, 이를 AI가 분석하여 패턴을 파악하고 피드백을 제공하는 감정 기반 투자 일지 서비스입니다. 모바일 사용성을 중심으로 설계되며, PWA 혹은 Capacitor로 앱처럼 제공될 수 있도록 구성합니다.

**기술 스택:**
Turborepo
Frontend: Next.js + Tailwind + Biome + PWA
Backend: Nest.js + PostgreSQL (No use ORM)
AI: Google Gemini API or OpenAI API or local model 
OCR: Google Vision API
Auth : JWT + httpOnly 쿠키 + OAuth 2.0 SSO
Storage : Supabase Storage or GCP Bucket
Visualizaion : Recharts or ApexCharts
Notification : Firebase Cloud Messaging(FCM)


---



## 🎯 서비스 목적

* 투자 시 감정의 영향력을 인지하고, 반복되는 실수나 감정적 매매를 줄이도록 유도
* 사용자 본인의 투자 성향과 감정 패턴을 AI 피드백을 통해 자가 성찰할 수 있도록 지원
* 감정과 수익률의 관계를 데이터 기반으로 시각화해 학습과 통찰의 도구 제공

---

## 🎨 브랜드 톤 앤 무드 (T\&M)

* Primary Color: 청량한 하늘색 (#68CCF4)
* 키워드: 직관적인, 편안한, 정서적인 연결, 신뢰감 있는, 미니멀

---

## 📱 페이지 플로우 및 상세 구조

### 1. 온보딩 및 홈 화면

* `/` (Home)

  * 온보딩 슬라이드 (3장): 서비스 소개 및 사용 흐름 설명
  * CTA: “오늘의 감정 기록하기” → `/journal/create`

### 2. 감정 일지 생성 페이지

* `/journal/create`

  * 스크린샷 업로드 (1일 3회 제한, JPG/PNG)
  * OCR 인식 결과 검수 및 수정 (종목명, 매수가, 수량)
  * 감정 선택 (이모지 선택)
  * 감정 메모 입력 (자유 입력)
  * 저장 버튼 → `/journal/list`로 이동

### 3. 감정 일지 리스트 페이지

* `/journal/list`

  * 종목별 카드 리스트 (종목명, 매수일, 수익률, 감정 기록 횟수)
  * 정렬 및 필터링 (수익률, 감정 상태별)
  * \[감정기록 추가] → `/journal/[symbol]/add`
  * \[AI 리포트 보기] → `/report/[symbol]`

### 4. 감정 상세 기록 페이지

* `/journal/[symbol]/add`

  * 현재 시세 입력 or 자동 호출
  * 감정 선택 (이모지)
  * 감정 메모 입력
  * 저장 후 `/journal/[symbol]`로 이동

### 5. 종목별 감정 타임라인 페이지

* `/journal/[symbol]`

  * 감정 타임라인 (이모지 + 날짜)
  * 수익률 변화 그래프 (라인차트)
  * 감정 요약 리스트 (메모 포함)
  * \[AI 리포트 요청] 버튼 → `/report/[symbol]`

### 6. AI 리포트 페이지

* `/report/[symbol]`

  * AI 요약 리포트 (감정 흐름 패턴, 행동 피드백)
  * 감정 트렌드 그래프
  * PDF 다운로드 버튼

### 7. 전체 감정 요약 리포트 (향후 기능)

* `/report/summary`

  * 사용자 전체 종목 감정 통계, 행동 패턴 분석

### 8. 설정 페이지

* `/settings`

  * 계정 정보 (이메일, 소셜 로그인)
  * 알림 설정 (리마인더)
  * 개인정보 보호정책 링크
  * 로그아웃 버튼

### 9. 오류 및 예외 처리

* `/404`, `/error` 페이지 (잘못된 접근 시 안내)

---

## 📋 상세 유스케이스 정의

### UC-01 스크린샷 업로드 및 감정 일지 생성

* 1일 3회 업로드 제한
* 거래 체결 내역 화면 스크린샷만 허용 (템플릿 가이드 제공)
* OCR 실패 시 수동 입력 가능
* 개인정보 자동 마스킹 필터 적용

### UC-02 감정 리스트 및 상세 뷰

* 종목별 감정 일지 카드 리스트 뷰
* 감정 필터링 및 정렬 기능

### UC-03 AI 리포트 생성

* 감정 기록이 일정 수(5개 이상) 누적되면 GPT 분석 가능
* 감정 패턴 및 행동 습관 분석 리포트 제공

### UC-04 PDF 리포트 다운로드

* AI 분석 리포트를 PDF로 저장 및 공유 기능 제공

---

## 🛡️ 보안 및 개인정보 보호 대책

1. **업로드 스크린샷은 서버 저장 없이 OCR 처리 후 즉시 삭제**
2. OCR 데이터는 사용자 계정 기반 암호화 저장 (AES-256)
3. 계좌번호, 개인식별정보 자동 마스킹 (OCR 필터링 레이어 적용)
4. API 통신은 HTTPS 기반, 토큰 기반 인증 및 세션 관리 적용 (JWT + httpOnly 쿠키)
5. 관리자 접근 제어 (IP allowlist, MFA)
6. 사용자 데이터 삭제 요청 시 완전 삭제 보장 (Right to be forgotten)
7. GPT API 요청 시 개인정보 포함된 데이터는 모두 익명화 처리

---

## ✅ 핵심 가설 (Problem-Solution Fit)

* 투자 결정은 수익률보다 감정에서 더 큰 영향을 받는다
* 감정 기록이 반복될수록 투자 습관이 개선된다
* 사용자들은 자신이 ‘왜 그런 결정을 내렸는지’ 시각화된 피드백을 원한다



